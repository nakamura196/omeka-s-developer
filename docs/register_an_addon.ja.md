# アドオンを登録する

Omeka アドオンとして[GitHub レポジトリを登録](https://omeka.org/register/)すると、以下の手順に従っていただければ新しいバージョンのアドオンを公開します。

まず、アドオンの GitHub レポジトリでリリースページに行き、「新しいリリースをドラフトする」をクリックします。タグ名（アドオンのバージョンと同じである必要はありません）とターゲットブランチを入力してください。リリースタイトル（例：アドオンのバージョン）や説明（例：リリースノート、変更履歴など）を入力することをお勧めしますが、必須ではありません。

次に、自分のコンピュータで、リリース用にパッケージ化されたアドオンの ZIP アーカイブを作成します。

この ZIP ファイルは GitHub が自動生成する ZIP ファイルとは異なるものでなければなりません。git や tx 設定などを除外する必要があります。

Git の`archive`コマンドの使用をお勧めします：

$ git archive --output={AddonZipName}.zip --prefix={AddonDirName}/ {tagname}

アーカイブに含めるべきでない言語ファイルやその他の git ファイルを`git archive`で除外するために、`.gitattributes`ファイルを含めるべきです。ほとんどのケースでは、このようになるでしょう：

```
/.gitattributes export-ignore
/.gitignore export-ignore
/.tx/ export-ignore
/language/_.pot export-ignore
/language/_.po export-ignore
```

`{AddonDirName}`は初めに登録したディレクトリ名と一致する必要があります。`{AddonZipName}`は任意ですが、`{AddonDirName}`と同じにすることをお勧めします。その後、この ZIP ファイルをリリースにバイナリとして添付します。

次に、「リリースを公開する」をクリックしてプロセスを完了します。すべてがチェックに合格した場合、まもなくリリースを登録します。レジストリに追加した後、同じ手順で更新が自動的に更新されるようになります。その後リリースをプレリリースまたはドラフトに設定した場合、当社のレジストリからリリースを削除します。

GitHub レポジトリの README を取り込み、アドオンのバージョンと一緒に公開していることに注意してください。README が公開準備が整っていること、およびファイル名がすべて大文字であることを確認してください（例: README.md）。

リリースを登録する前に、以下の条件が真であることを確認します：

- リポジトリにリリースがある
- リリースがドラフトではない
- リリースにバイナリ（アセット）が添付されている
- そのリリース/アセットの組み合わせが既に登録されていない
- アセットが.zip 拡張子を持っている
- アセットが ZIP ファイルである
- ZIP ファイルにトップレベルディレクトリが 1 つだけ含まれている
- ZIP ファイルのトップレベルディレクトリが登録した名前と同じである
- ZIP ファイルに.jpg サムネイルが含まれている（テーマのみ）
- INI ファイルが正しいパスに含まれている：
  - クラシックプラグイン: /plugin.ini
  - クラシックテーマ: /theme.ini
  - S モジュール: /config/module.ini
  - S テーマ: /config/theme.ini
- INI ファイルに解析エラーがない
- INI ファイルに`[info]`セクションがある
- INI ファイルに`version`がある

これらすべての条件が真である場合、リリースを登録して公開します。アドオンが期待通りに動作するかどうかは確認しません。リリースを動作条件を満たすタグやコミットに設定する責任はあなたにあります。
